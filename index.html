<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Seattle Plants</title>
        <link rel="stylesheet" href="https://js.arcgis.com/4.24/esri/themes/light/main.css">
        <link rel="stylesheet" href="css/main.css">
    </head>
    <body>
        <div class="overlay">
            <h1>Seattle Plants</h1>
            <p>Explore the map to discover various plants and their interesting facts.</p>
        </div>
        <div id="viewDiv"></div>
        <script src="https://js.arcgis.com/4.24/"></script>
        <script>
            require([
                "esri/Map",
                "esri/views/MapView",
                "esri/Graphic",
                "esri/layers/GraphicsLayer"
            ], function(Map, MapView, Graphic, GraphicsLayer) {
                var map = new Map({
                    basemap: "streets-navigation-vector"  // Choose a basemap
                });

                var view = new MapView({
                    container: "viewDiv",
                    map: map,
                    center: [-122.33425800221698, 47.636252144942864], // Longitude, latitude
                    zoom: 11
                });

                var graphicsLayer = new GraphicsLayer();
                map.add(graphicsLayer);

                // Plant data
                var plants = [
                    { lat: 47.67075910584363, lng: -122.31515402681624, name: "Sword lily", date: "July 16, 2024", desc: "The ancient Greeks believed this flower grew wherever anyone was slain by a sword.", img: "assets/swordlily.png" },
                    { lat: 47.66952212500001, lng: -122.31559611959425, name: "Lacecap hydrangea", date: "July 3, 2024", desc: "Symbolizing grace, gratitude, and understanding, hydrangeas have deep cultural roots in Japan and China, where they have been cultivated and appreciated for centuries.", img: "assets/lacecap.png" },
                    { lat: 47.669534054398504, lng: -122.31443712786836, name: "Sword lily", date: "July 3, 2024", desc: "Also known as gladiolus flowers, the name derives from the Latin word \"gladius,\" translating to sword.", img: "assets/swordlily2.png" },
                    { lat: 47.66627093037119, lng: -122.312918406971, name: "Oregon grape", date: "July 3, 2024", desc: "Native American tribes of the Pacific Northwest have used preparations from Oregon grape roots to treat stomach problems, hemorrhages, arthritis, and tuberculosis.", img: "assets/oregongrape.png" },
                    { lat: 47.596598947552145, lng: -122.32733792025753, name: "Mophead hydrangea", date: "June 25, 2024", desc: "These hydrangeas can change color based on the pH level of the soil they are grown in. In acidic soils, they tend to produce blue flowers due to the presence of aluminum ions, while in alkaline soils, they produce pink flowers.", img: "assets/mophead.png" },            
                    { lat: 47.66759285152948, lng: -122.31535255702143, name: "Chinese rose", date: "June 25, 2024", desc: "The flowers of the Chinese rose are edible and are sometimes used to make herbal teas, jams, and syrups. In some regions of Asia, the petals are used as a garnish or flavoring in salads and desserts.", img: "assets/chineserose.png" },                                        
                    { lat: 47.66966635905383, lng: -122.31531035987722, name: "Aaron's beard", date: "June 23, 2024", desc: "Named after the biblical figure Aaron, brother of Moses, this plant is a popular choice as a low-maintenance ground cover in landscapes and gardens.", img: "assets/aaron.png" },                                        
                    { lat: 47.66938655829783, lng: -122.31539240922332, name: "Common daisy", date: "July 17, 2024", desc: "The common daisy has a unique trait known as nyctinasty, where its petals close at night and reopen in the morning. This behavior protects the flower's reproductive organs from cold temperatures and dew, and it also aids in pollen transfer by attracting early morning pollinators when the petals open again.", img: "assets/daisy.png" },                                                        
                    { lat: 47.66937524778018, lng: -122.31557080753772, name: "Lacecap hydrangea", date: "July 17, 2024", desc: "Lacecap hydrangeas differ from mopheads due to their unique flower structure. The central cluster of tiny, fertile flowers is surrounded by larger, showy, sterile flowers. This gives them their distinctive lace-like appearance.", img: "assets/lacecap2.png" },                                        
                    { lat: 47.66187844686903, lng: -122.30940292315144, name: "Mophead hydrangea", date: "July 17, 2024", desc: "These pink flowers are a result of alkaline soil with pH levels above 6.5!", img: "assets/mophead2.png" },                                        
                    { lat: 47.6621589274589, lng: -122.30945207176806, name: "Mophead hydrangea", date: "July 17, 2024", desc: "In the Victorian era, hydrangeas were sometimes seen as symbols of boastfulness due to their large, extravagant blooms, which could be interpreted as a display of vanity.", img: "assets/mophead3.png" },                                        
                    { lat: 47.66897861052591, lng: -122.31430283083725, name: "Chinese rose", date: "May 23, 2024", desc: "The Chinese rose is an evergreen shrub that can grow up to 10 feet (3 meters) tall in ideal conditions. Its glossy, dark green leaves provide an attractive backdrop to its bright flowers.", img: "assets/chineserose2.png" },
                    { lat: 47.66716150255265, lng: -122.31534077352912, name: "Orange ball buddleja", date: "May 16, 2024", desc: "Native to Chile and Argentina, particularly in the Andean regions, Buddleja globosa, also known as the Orange Ball Tree, can withstand extreme cold and heat, making it a hardy plant able to thrive in both frosty winters and scorching summers.", img: "assets/orangeball.png" },
                ];
                // { lat: , lng: , name: "", date: "", desc: "", img: "" },                                        

                plants.forEach(function(plant) {
                    var point = {
                        type: "point",
                        longitude: plant.lng,
                        latitude: plant.lat
                    };

                    var symbol = {
                        type: "picture-marker",
                        url: 'assets/tulip.png',
                        width: "36px",
                        height: "36px"
                    };

                    // Construct popup content programmatically
                    var popupContent = document.createElement("div");
                    popupContent.className = "popup-content";

                    var imgElement = document.createElement("img");
                    imgElement.src = plant.img;
                    imgElement.className = "popup-img";
                    imgElement.style.width = "50%";
                    imgElement.style.height = "auto";
                    popupContent.appendChild(imgElement);

                    var dateElement = document.createElement("div");
                    dateElement.textContent = "Photo taken: " + plant.date;
                    popupContent.appendChild(dateElement);
                    popupContent.innerHTML += "<br>";

                    var descElement = document.createElement("div");
                    descElement.textContent = plant.desc;
                    popupContent.appendChild(descElement);

                    var popupTemplate = {
                        title: plant.name,
                        content: popupContent
                    };

                    var graphic = new Graphic({
                        geometry: point,
                        symbol: symbol,
                        popupTemplate: popupTemplate
                    });

                    graphicsLayer.add(graphic);
                });
            });
        </script>
    </body>
</html>
